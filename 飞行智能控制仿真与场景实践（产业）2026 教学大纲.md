# 《飞行智能控制仿真与场景实践（产业）》课程教学大纲

---

## 课程基本信息

| 项目 | 内容 |
|------|------|
| 学院 | 大数据学院 |
| 教师 | 郑欣、袁远飞 |
| 编写时间 | 2026年01月15日 |
| 课程编码 | Y010400156 |
| 课程类别 | 专业限选课程 |
| 适用年级、专业 | 2023级 |
| 开课学期 | 第六学期 |
| 总学时 | 64（理论16 + 实验16 + 实践32） |
| 总学分 | 4 |
| 先修课程 | 无 |
| 后续课程 | 无 |
| 课程负责人 | 郑欣 |

### 课程简介

本课程是一门以项目驱动、以产业业务需求为背景的跨学科实践课程。课程项目背景来源于英特航空的真实业务场景（物流吊运、智能巡检、无人机消杀、集群表演等），以产业需求引发技术思考，通过仿真实验验证方案设计和算法能力，最终落实到无人机相关的业务实践的系统训练。课程基于开源的ROS2+Gazebo+PX4为基础技术栈，采用"产业问题引入→技术原理讲解→仿真实验验证→真机实践整合实施"的教学模式。其中32学时在仿真实验室进行，32学时在机场实训，融合理论讲解与实操训练。

### 建议教材

自编讲义：《飞行智能控制仿真与场景实践——基于ROS2/PX4/Gazebo开源技术栈》

### 参考资料

#### 参考书目

1. 刘相权、张万杰，《机器人操作系统(ROS2)入门与实践》，机械工业出版社，2024年8月，ISBN：9787111758433
2. 桑欣，《机器人操作系统(ROS2)入门与实践》，机械工业出版社，2024年7月，ISBN：9787111758068
3. 高中华、胡乔生、李文君，《无人机操控技术》，机械工业出版社，2024年1月，ISBN：9787111740476
4. 侯伟、靳紫轩，《ROS 2机器人操作系统与Gazebo机器人仿真》，清华大学出版社，2024年12月，ISBN：9787302702535

#### 在线资源

- ROS2官方文档：https://docs.ros.org/en/jazzy/
- PX4用户指南：https://docs.px4.io/main/en/
- Gazebo Harmonic文档：https://gazebosim.org/docs/harmonic/
- Nav2导航框架文档：https://docs.nav2.org/
- 亚博Jetson Nano/Orin系列教程：https://www.yahboom.com/study/ROSMASTER-M1
- 北航飞思实验室 Rflysim：https://rflysim.com/doc/
- 浙大FAST Lab ego-planner-swarm：https://github.com/ZJU-FAST-Lab/ego-planner-swarm
- 北大XTDrone2：https://github.com/andy-zhuo-02/XTDrone2
- 阿木实验室 Prometheus V3
- 鱼香ROS FishBot

---

## 一、课程教学目标

### 教学目标

1. **教学目标1**：掌握ROS2/Gazebo仿真环境的搭建与配置，理解ROS2核心通信机制（Topic/Service/Action），具备在仿真环境中搭建机器人系统的基础能力。

2. **教学目标2**：能够基于Nav2导航框架，在仿真环境中实现智能小车的自主导航与动态避障，掌握传感器数据处理、地图构建、路径规划等仿真核心技能。

3. **教学目标3**：理解PX4飞控系统架构与通信机制，熟练使用QGroundControl地面站进行任务规划，在仿真环境中完成无人机的自主飞行控制与基础避障。

4. **教学目标4**：具备将仿真算法迁移到真实无人机平台的能力，掌握真机飞行安全规范与实操技能，能够针对巡检、吊运等产业场景进行真机验证与方案评估。

### 课程教学目标与毕业要求的对应关系

| 毕业要求 | 毕业要求指标点 | 课程教学目标 | 支撑度 |
|----------|----------------|--------------|--------|
| 毕业要求3：问题分析 | 能够掌握机器人系统原理和方法，熟练运用仿真工具进行系统建模、数据分析和结果验证；能解释仿真结果，并得出合理的结论及可视化效果。 | 教学目标1 | H |
| 毕业要求5：研究 | 能够基于机器人技术及信息技术，对感知、决策、控制、执行等关键环节进行研究。 | 教学目标2 | H |
| 毕业要求6：使用现代工具 | 能够针对复杂的机器人控制问题，选择和使用恰当的仿真平台及相应的算法工具，对工程中的复杂问题进行分析验证，并能理解其局限性。 | 教学目标3、4 | M |

---

## 二、课程考核方式

### 考核环节及权重

| 考核环节 | 权重（%） | 备注 |
|----------|----------|------|
| 课堂表现（签到、随堂测验等活动） | 20 | |
| 期中小测 | 10 | |
| 课内实验 | 20 | |
| 期末报告 | 50 | |

### 课程教学目标与考核内容、考核方式的关系矩阵图

| 课程教学目标 | 考核内容 | 考核方式 |
|--------------|----------|----------|
| 课程教学目标1 | 1. ROS2/Gazebo环境搭建与配置能力<br>2. ROS2通信机制的理解与应用 | 1. 作业<br>2. 随堂测验 |
| 课程教学目标2 | 1. 传感器数据处理与可视化实验操作<br>2. Nav2导航框架的配置与调参 | 1. 随堂测验<br>2. 课内实验<br>3. 作业 |
| 课程教学目标3 | 1. PX4 SITL仿真环境搭建<br>2. QGroundControl地面站任务规划操作 | 1. 小组讨论<br>2. 课内实验<br>3. 作业 |
| 课程教学目标4 | 1. 无人机状态监控与任务规划（基础）<br>2. 无人机Offboard自主控制与避障（高分挑战项）<br>3. 产业场景技术方案设计与汇报 | 1. 期中小测<br>2. 课内实验<br>3. 期末作品 |

---

## 三、教学内容与学时分配

### 第一章 课程导论与环境搭建

#### 1. 教学目的和要求

- 了解英特航空产业项目背景，理解仿真技术在无人机开发中的核心价值
- 掌握Ubuntu Linux基础操作，能够独立搭建ROS2 Jazzy + Gazebo Harmonic仿真环境
- 能够加载RosMaster小车模型并完成基础遥控操作

**思政融合**：了解我国在低空经济领域的政策支持与产业布局，增强行业自信

#### 2. 教学内容

- **产业背景**：英特航空四大业务场景的技术需求分析
- **仿真价值**：数字孪生、零成本试错、快速迭代
- **环境搭建**：Ubuntu 24.04配置、ROS2 Jazzy安装、Gazebo Harmonic部署
- **小车仿真**：RosMaster模型加载、键盘遥控、基础运动

#### 3. 重点

- 理解仿真在产业开发中的价值
- 掌握环境搭建的完整流程

#### 4. 难点

- 克服对Linux命令行操作的陌生感
- 理解ROS2工作空间结构

#### 5. 学时

4学时

---

### 第二章 ROS2通信机制

#### 1. 教学目的和要求

- 理解ROS2的核心通信机制（Topic、Service、Action），能够解释发布-订阅模式的工作原理
- 掌握ROS2命令行工具的使用，能够查看和分析系统中的话题、节点关系
- 能够编写简单的Python节点实现话题通信

**思政融合**：通过国产机器人操作系统发展，培养自主创新意识

#### 2. 教学内容

- **核心概念**：节点、话题、服务、动作、参数
- **通信模式**：发布-订阅、请求-响应、动作反馈
- **命令行工具**：ros2 topic、ros2 node、ros2 service、rqt_graph
- **编程实践**：Python发布者/订阅者节点编写

#### 3. 重点

- 理解发布-订阅通信模式
- 掌握rqt_graph可视化工具

#### 4. 难点

- 理解异步通信的特性
- QoS（服务质量）配置

#### 5. 学时

4学时

---

### 第三章 传感器感知与数据处理

#### 1. 教学目的和要求

- 了解常用机器人传感器（激光雷达、深度相机、IMU）的原理与特点
- 掌握Rviz2可视化工具的使用，能够配置显示各类传感器数据
- 能够使用ros2 bag进行数据录制与回放分析

**思政融合**：探讨数据隐私与安全合规问题，培养技术伦理意识

#### 2. 教学内容

- **传感器原理**：激光雷达测距、深度相机成像、IMU姿态测量
- **数据格式**：LaserScan、PointCloud2、Image、Imu消息类型
- **可视化配置**：Rviz2界面、Display类型、坐标系选择
- **数据管理**：ros2 bag录制、回放、格式转换

#### 3. 重点

- 传感器数据的可视化配置
- 理解不同传感器的适用场景

#### 4. 难点

- 坐标系（TF）的概念理解
- 传感器盲区分析

#### 5. 学时

4学时

---

### 第四章 Nav2导航基础

#### 1. 教学目的和要求

- 理解Nav2导航框架的整体架构，掌握SLAM建图、定位、路径规划的基本概念
- 能够使用现有地图进行导航配置，实现智能小车的自主导航

**思政融合**：培养算法思维，理解"感知-决策-控制"闭环

#### 2. 教学内容

- **导航框架**：Nav2架构概览（BT行为树、Planner、Controller、Costmap）
- **SLAM建图**：SLAM Toolbox 和 nav2 原理简介
- **路径规划**：全局规划器（NavFn、Smac Planner）概念介绍
- **基础导航**：地图加载、导航启动、目标点设置

#### 3. 重点

- Nav2导航栈的配置与启动
- 基础导航功能的使用

#### 4. 难点

- 理解代价地图的概念

#### 5. 学时

4学时

---

### 第五章 导航进阶与避障挑战（高分项）

#### 1. 教学目的和要求

- 理解局部路径规划与避障控制的基本原理
- **【高分挑战项】** 能够配置Nav2参数实现动态避障

**思政融合**：培养调试能力，理解参数与物理行为的关系

#### 2. 教学内容

- **局部控制器**：DWB、MPPI控制器原理介绍
- **避障原理**：障碍物检测、速度调整、路径重规划
- **参数调优**：膨胀半径、代价地图、速度限制（【高分挑战项】）
- **实战调试**：解决避障常见问题（【高分挑战项】）

#### 3. 重点

- 导航参数的理解与配置

#### 4. 难点

- 平衡安全性与通过性的参数调优（【高分挑战项】）

#### 5. 学时

4学时

---

### 第六章 PX4飞控系统架构

#### 1. 教学目的和要求

- 理解PX4飞控系统的软件架构，掌握传感器、估计器、控制器、混控器的数据流
- 理解PX4与ROS2的分工与协作关系
- 能够搭建PX4 SITL仿真环境，配置MicroXRCE-DDS桥接通信

**思政融合**：通过国产飞控发展历程，培养自主创新意识

#### 2. 教学内容

- **PX4架构**：模块化设计、uORB消息总线、飞行模式状态机
- **系统分工**：PX4负责底层控制、ROS2负责上层任务
- **通信桥接**：MicroXRCE-DDS原理与配置
- **SITL仿真**：PX4固件编译、Gazebo集成、仿真启动

#### 3. 重点

- 理解PX4与ROS2的协作架构
- 掌握SITL仿真环境搭建

#### 4. 难点

- MicroXRCE-DDS的配置与调试
- 理解飞行模式切换逻辑

#### 5. 学时

4学时

---

### 第七章 地面站与任务规划

#### 1. 教学目的和要求

- 理解地面站在无人机系统中的作用，掌握QGroundControl的核心功能
- 能够使用地面站进行航点任务规划与执行
- 理解常用飞行模式的特点与切换条件

**思政融合**：强调飞行安全意识与规范操作

#### 2. 教学内容

- **地面站功能**：状态监控、任务规划、参数配置、日志分析
- **QGroundControl**：界面布局、连接配置、任务编辑器
- **飞行模式**：Manual、Altitude、Position、Mission、Offboard
- **任务执行**：航点任务创建、上传、执行、监控

#### 3. 重点

- QGroundControl的任务规划功能
- 飞行模式的理解

#### 4. 难点

- 理解不同飞行模式的适用场景
- 任务执行的异常处理

#### 5. 学时

4学时

---

### 第八章 无人机自主控制基础

#### 1. 教学目的和要求

- 理解Offboard模式下ROS2控制无人机的方法
- 了解无人机起飞、悬停、航点飞行、降落的基本流程

**思政融合**：培养技术迁移能力，理解平台无关的算法思想

#### 2. 教学内容

- **Offboard控制概念**：模式切换、控制指令类型（位置/速度/姿态）
- **无人机状态监控**：通过ROS2话题读取无人机位姿、速度等状态信息
- **任务规划**：使用QGroundControl进行航线任务规划
- **【高分挑战项】Offboard控制节点开发**：编写节点实现起飞、悬停、航点飞行、降落
- **【高分挑战项】传感器集成与避障**：为无人机添加深度相机/激光雷达，实现避障飞行

#### 3. 重点

- Offboard模式的概念理解
- 无人机状态监控

#### 4. 难点

- Offboard模式的安全切换（【高分挑战项】）

#### 5. 学时

4学时

---

### 第九章 综合项目与产业应用

#### 1. 教学目的和要求

- 综合运用前序知识，完成小车/无人机仿真项目
- 能够设计仿真场景模拟产业应用（巡检/物流）
- 能够进行系统性能优化与问题排查
- 能够撰写技术报告并进行项目路演
- **【高分挑战项】** 完成无人机自主避障飞行的完整系统

**思政融合**：培养工程表达能力，锻炼跨学科沟通素养

#### 2. 教学内容

- **系统集成**：感知、决策、控制模块的整合
- **场景设计**：模拟英特航空产业场景
- **性能优化**：控制精度、响应速度、稳定性
- **项目路演**：技术演示、方案汇报、答辩交流
- **【高分挑战项】** 无人机Offboard自主控制与避障系统集成

#### 3. 重点

- 系统的完整性与稳定性
- 技术方案的表达与展示

#### 4. 难点

- 多模块协同的故障排查
- Sim2Real差距的理解

#### 5. 学时

4学时

---

## 四、教学进度表

| 周别 | 授课章节与内容摘要 | 教学时数 | 教学模式 | 课程思政教学内容 |
|------|-------------------|----------|----------|-----------------|
| 1 | **第一章：课程导论与环境搭建（一）**<br>- 产业背景引入：英特航空业务场景（物流吊运、巡检、消杀、集群表演）的技术挑战<br>- 问题思考：为什么需要仿真？从"炸机"成本到数字孪生<br>- 技术栈概览：ROS2 + Gazebo + Nav2 + PX4 的整体架构<br>- 课程路线图：先小车通信控制原理后无人机和算法仿真的学习路径 | 理论1学时<br>实验1学时 | 案例教学+实操 | 介绍我国低空经济政策与机器人产业发展，激发学生投身新兴产业的热情 |
| 2 | **第一章：课程导论与环境搭建（二）**<br>- Ubuntu 22.04环境配置与ROS2 Jazzy安装<br>- Gazebo Harmonic仿真环境启动与界面熟悉<br>- 加载ROS2小车模型，完成首次仿真运行<br>- 使用键盘遥控小车移动 | 理论1学时<br>实验1学时 | 演示+实操 | 强调"验证先行"的工程思维，培养严谨的科学态度 |
| 3 | **第二章：ROS2通信机制（一）**<br>- 问题引入：机器人各模块如何"对话"？<br>- 核心概念：节点（Node）、话题（Topic）、服务（Service）、动作（Action）<br>- 类比理解：用"外卖订单系统"解释发布-订阅模式<br>- DDS中间件：ROS2的通信基础 | 理论1学时<br>实验1学时 | 多媒体+讨论 | 通过国产机器人操作系统发展，培养自主创新意识 |
| 4 | **第二章：ROS2通信机制（二）**<br>- 使用 ros2 topic list、ros2 topic echo 查看话题数据<br>- 使用 rqt_graph 可视化节点通信关系<br>- 编写简单的Python发布者/订阅者节点<br>- 通过话题发布速度指令控制小车运动 | 理论1学时<br>实验1学时 | 实操+调试 | 培养系统思维，理解模块化设计的工程价值 |
| 5 | **第三章：传感器感知与数据处理（一）**<br>- 问题引入：机器人如何"看见"周围环境？<br>- 传感器类型：激光雷达（LiDAR）、深度相机（RGBD）、IMU<br>- 数据格式：LaserScan、PointCloud2、Image消息类型 | 理论1学时<br>实验1学时 | 对比分析 | 探讨数据隐私与安全合规，培养技术伦理意识 |
| 6 | **第三章：传感器感知与数据处理（二）**<br>- 在Rviz2中配置显示激光雷达扫描数据<br>- 查看RosMaster的深度相机图像<br>- 设置障碍物场景，观察传感器检测效果<br>- 使用 ros2 bag 录制传感器数据并回放分析 | 理论1学时<br>实验1学时 | 实操+分析 | 培养数据驱动的问题分析能力 |
| 7 | **第四章：Nav2导航基础（一）**<br>- 问题引入：如何让机器人自己"找路"？<br>- 导航框架：Nav2架构概览（地图→定位→规划→控制）<br>- SLAM建图：SLAM Toolbox原理简介<br>- 全局路径规划：NavFn/Smac Planner概念 | 理论1学时<br>实验1学时 | 案例+理论 | 培养算法思维，理解"感知-决策-控制"闭环 |
| 8 | **第四章：Nav2导航基础（二）**<br>- 使用SLAM Toolbox为仿真环境建图并保存<br>- 配置Nav2导航栈，加载地图启动导航<br>- 在Rviz2中设置目标点，观察小车自主导航<br>- **【高分挑战项】** 避障参数配置与调试<br>- **期中项目**：智能小车自主导航方案设计与demo演示 | 理论1学时<br>实验1学时 | 调参实战+展示 | 重点培养"调试能力"，理解参数与物理行为的关系 |
| 9 | **第五章：PX4飞控系统架构（一）**<br>- 从小车到无人机：技术迁移的思考<br>- 飞控系统：PX4架构概览（传感器→估计器→控制器→混控器）<br>- 软件分工：PX4（飞控/姿态稳定）与ROS2（任务/业务逻辑）<br>- 通信桥接：MicroXRCE-DDS中间件原理 | 理论1学时<br>实验1学时 | 多媒体+讨论 | 通过国产飞控发展历程，培养自主创新意识 |
| 10 | **第五章：PX4飞控系统架构（二）**<br>- 编译并启动PX4 SITL仿真（Gazebo Harmonic）<br>- 配置MicroXRCE-DDS Agent，桥接PX4与ROS2<br>- 使用 ros2 topic list 查看PX4发布的话题<br>- 通过ROS2话题读取无人机位姿、速度等状态信息 | 理论1学时<br>实验1学时 | 实操+调试 | 培养系统集成能力，理解多系统协同 |
| 11 | **第六章：地面站与任务规划（一）**<br>- 地面站作用：监控、规划、调参、日志分析<br>- QGroundControl：界面介绍与核心功能<br>- 飞行模式：Manual、Position、Offboard等模式解析 | 理论1学时<br>实验1学时 | 演示+讨论 | 强调飞行安全意识与规范操作 |
| 12 | **第六章：地面站与任务规划（二）**<br>- 安装并连接QGroundControl到PX4 SITL<br>- 在地面站中规划航点任务（Waypoint Mission）<br>- 执行自动航线飞行，观察飞行状态<br>- 使用地面站进行参数调整与日志下载 | 理论1学时<br>实验1学时 | 实操+分析 | 培养规范化操作习惯，理解适航管理重要性 |
| 13 | **第七章：无人机自主控制基础（一）**<br>- Offboard模式概念：ROS2接管无人机控制<br>- 控制接口类型：位置控制、速度控制、姿态控制<br>- 无人机状态监控：通过ROS2话题读取无人机位姿、速度 | 理论1学时<br>实验1学时 | 案例+理论 | 培养技术迁移能力，理解平台无关的算法思想 |
| 14 | **第七章：无人机自主控制基础（二）**<br>- **【高分挑战项】** 编写Offboard控制节点，实现起飞、悬停、降落<br>- **【高分挑战项】** 发布速度指令控制无人机飞往指定坐标<br>- **【高分挑战项】** 传感器集成与避障实现 | 理论1学时<br>实验1学时 | 实操+调试 | 重点培养调试能力，理解仿真验证的工程价值 |
| 15 | **第八章：综合项目与产业应用（一）**<br>- 项目整合：构建完整的小车/无人机仿真系统<br>- 场景设计：模拟英特航空巡检/物流场景<br>- 性能优化：控制精度、响应速度、稳定性调优<br>- Sim2Real思考：仿真与实飞的差距分析 | 理论1学时<br>实验1学时 | 项目研讨 | 引导关注技术安全与产业落地的挑战 |
| 16 | **第八章：综合项目与产业应用（二）**<br>- **期末作品路演**：模拟向甲方企业（英特航空）技术团队汇报<br>- 演示内容：小车导航或无人机飞行仿真演示（挑战项：无人机自主避障）<br>- 汇报内容：技术方案PPT（系统架构、关键参数、调试过程、产业应用思考）<br>- 作品演示交流：技术问答与改进建议 | 实验2学时 | 项目研讨 | 锻炼工程表达能力，培养跨学科沟通素养 |

---

## 五、课程教学目标与教学内容达成度矩阵图

| 章节名称 | 课程教学目标1 | 课程教学目标2 | 课程教学目标3 | 课程教学目标4 |
|----------|---------------|---------------|---------------|---------------|
| 第一章 | H | L | L | M |
| 第二章 | H | M | M | M |
| 第三章 | M | H | M | M |
| 第四章 | M | H | M | M |
| 第五章 | M | M | H | M |
| 第六章 | L | M | H | M |
| 第七章 | M | M | H | H |
| 第八章 | M | M | H | H |

---

## 附录：签字确认

| 项目 | 签字 |
|------|------|
| 执笔人 | |
| 审核人 | |
| 学院分管教学领导签字（盖章） | |
