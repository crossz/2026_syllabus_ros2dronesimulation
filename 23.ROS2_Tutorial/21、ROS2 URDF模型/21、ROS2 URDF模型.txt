21 、 ROS2 URDF 模型  
 
1 、URDF 简介  
ROS 中的建模方法叫做 URDF ，全称是统一机器人描述格式，不仅可以清晰描述机器人自身的模型，还可
以描述机器人的外部环境。 URDF 模型文件使用的是 XML 格式。
solidworks 模型转 URDF 插件： sw_urdf_exporter - ROS Wiki
 
2 、机器人的组成  
建模描述机器人的过程中，我们自己需要先熟悉机器人的组成和参数，比如机器人一般是由 硬件结构、
驱动系统、传感器系统、控制系统 四大部分组成，市面上一些常见的机器人，无论是移动机器人还是机
械臂，我们都可以按照这四大组成部分进行分解。
硬件结构就是底盘、外壳、电机等实打实可以看到的设备；
驱动系统就是可以驱使这些设备正常使用的装置，比如电机的驱动器，电源管理系统等；
传感系统包括电机上的编码器、板载的 IMU 、安装的摄像头、雷达等等，便于机器人感知自己的状
态和外部的环境；
控制系统就是我们开发过程的主要载体了，一般是树莓派、电脑等计算平台，以及里边的操作系统
和应用软件。
机器人建模的过程，其实就是按照类似的思路，通过建模语言，把机器人每一个部分都描述清楚，再组
合起来的过程。
 
3 、URDF 语法  

3.1 、连杆 Link 的描述  
标签用来描述机器人某个刚体部分的外观和物理属性，外观包括尺寸、颜色、形状，物理属性包括质
量、惯性矩阵、碰撞参数等。
以这个机械臂连杆为例，它的 link 描述如下：
link 标签中的 name 表示该连杆的名称，我们可以自定义，未来 joint 连接 link 的时候，会使用到这个名
称。
link 里边的 部分用来描述机器人的外观，比如：
表示几何形状，里边使用 调用了一个在三维软件中提前设计好的蓝色外观，就是这个 stl 文件，看上
去和真实机器人是一致的
表示坐标系相对初始位置的偏移，分别是 x 、 y 、 z 方向上的平移，和 roll 、 pitch 、 raw 旋转，不需要
偏移的话，就全为 0 。

第二个部分 ，描述碰撞参数，里边的内容似乎和 一样，也有 和 ，看似相同，其实区别还是比较大的。
部分重在描述机器人看上去的状态，也就是视觉效果；
部分则是描述机器人运动过程中的状态，比如机器人与外界如何接触算作碰撞。
在这个机器人模型中，蓝色部分是通过 来描述的，在实际控制过程中，这样复杂的外观在计算碰撞检测
时，要求的算力较高，为了简化计算，我们将碰撞检测用的模型简化为了绿色框的圆柱体，也就是 里边
描述的形状。 坐标系偏移也是类似，可以描述刚体质心的偏移。
如果是移动机器人的话， link 也可以用来描述小车的车体、轮子等部分。
 
3.2 、关节 Joint 描述  
机器人模型中的刚体最终要通过关节 joint 连接之后，才能产生相对运动。
URDF 中的关节有六种运动类型。

1. continuous ，描述旋转运动，可以围绕某一个轴无限旋转，比如小车的轮子，就属于这种类型。
2. revolute ，也是旋转关节，和 continuous 类型的区别在于不能无限旋转，而是带有角度限制，比如
机械臂的两个连杆，就属于这种运动。
3. prismatic ，是滑动关节，可以沿某一个轴平移，也带有位置的极限，一般直线电机就是这种运动
方式。
4. fixed ，固定关节，是唯一一种不允许运动的关节，不过使用还是比较频繁的，比如相机这个连杆，
安装在机器人上，相对位置是不会变化的，此时使用的连接方式就是 Fixed 。
5. Floating 是浮动关节，第六种 planar 是平面关节，这两种使用相对较少。
在URDF 模型中，每一个 link 都使用这样一段 xml 内容描述，比如关节的名字叫什么，运动类型是哪一
种。


parent 标签：描述父连杆；
child 标签：描述子连杆，子连杆会相对父连杆发生运动；
origin ：表示两个连杆坐标系之间的关系，也就是图中红色的向量，可以理解为这两个连杆该如何
安装到一起；
axis 表示关节运动轴的单位向量，比如 z 等于 1 ，就表示这个旋转运动是围绕 z 轴的正方向进行的；
limit 就表示运动的一些限制了，比如最小位置，最大位置，和最大速度等。
 
4 、完整机器人模型  
最终所有的 link 和 joint 标签完成了对机器人每个部分的描述和组合，全都放在一个 robot 标签中，就形成
了完整的机器人模型。


所以大家在看某一个 URDF 模型时，先不着急看每一块代码的细节，先来找 link 和 joint ，看下这个机器人
是由哪些部分组成的，了解完全局之后，再看细节。
 
4.1 、创建机器人模型  
以 muto 的模型为例，将本节教程文件夹中的 yahboomcar_description 功能包复制到工作空间的 src 目
录下：
 
urdf ：存放机器人模型的 URDF 或 xacro 文件
meshes ：放置 URDF 中引用的模型渲染文件
launch ：保存相关启动文件
rviz ：保存 rviz 的配置文件

 
之后编译功能包
 
4.2 、模型可视化效果  
刷新环境变量，然后运行启动命令
之后会自动启动 rviz ，并显示机器人模型：
 
 
 colcon build --packages-select yahboomcar_description
ros2 launch yahboomcar_description display.launch.py